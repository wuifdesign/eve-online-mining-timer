!function(i){"use strict";var o,t={"sound-1":"Sound 1","sound-2":"Sound 2","sound-3":"Sound 3","sound-4":"Sound 4","sound-5":"Sound 5","sound-6":"Sound 6","sound-7":"Sound 7"};Vue.config.devtools=!0;Vue.filter("time",function(t){var r=Math.floor(t/60),e=t-60*r;return r<10&&(r="0"+r),e<10&&(e="0"+e),r+":"+e}),Vue.filter("number",function(t){return Math.round(t).toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}),Vue.filter("toFixed",function(t){var r=Math.round(100*t).toString(),e=r.substr(0,r.length-2).replace(/\B(?=(\d{3})+(?!\d))/g,","),i=Math.round(r.slice(-2));return""===e&&(e=0),i<10&&(i="0"+i),e+"."+i}),Vue.filter("round",{read:function(t){return Math.round(t)},write:function(t){return isNaN(t)?0:Math.round(t)}}),Vue.component("task-row",{template:"#grid-template",replace:!0,props:{data:Object,current_ship:Object,settings:Object,yield_per_sec_m3:Number,"remove-task":{type:Function,required:!0},"add-cargo":{type:Function,required:!0},"add-ore":{type:Function,required:!0}},data:function(){return{turrets:1,turrets_select:[],running:!1,select:o.select,interval:null}},created:function(){var t=this;this.$on("stop-tasks",function(){t.stop()}),this.updateTurretData()},watch:{current_ship:function(){this.updateTurretData()}},computed:{ore_size:function(){return""===this.data.ore?0:o.size[this.data.ore]},total_ore_size:function(){return isNaN(this.data.count)?0:Math.round(this.data.count*this.ore_size)},ore_per_sec:function(){return this.yield_per_sec_m3/this.ore_size/this.current_ship.turrets*this.turrets},circles:function(){var t=this.total_ore_size/this.current_ship.yield_per_turret/this.turrets;return isNaN(t)||!isFinite(t)?0:t},time:function(){var t=Math.round(this.circles*this.current_ship.circle_time);return isNaN(t)?0:t}},methods:{updateTurretData:function(){if(null!==this.current_ship){this.turrets_select=[];for(var t=1;t<=this.current_ship.turrets;t++)this.turrets_select.push(t);this.current_ship.split_turrets?this.turrets=1:this.turrets=this.current_ship.turrets}},start:function(){var r;this.time<=0||((r=this).interval=setInterval(function(){var t=r.ore_per_sec;r.data.count<r.ore_per_sec&&(t=r.data.count),r.data.count-=r.ore_per_sec,r.addCargo(t*r.ore_size),r.addOre(r.data.ore,r.data.variant,t),r.data.count<=0&&(i("#"+r.settings.task_sound)[0].play(),r.data.count=0,r.stop())},1e3),this.running=!0)},stop:function(){clearInterval(this.interval),this.interval=null,this.running=!1},remove:function(){this.removeTask(this.data)}}});function r(){i.each(t,function(t){i("#app-audio-holder").append('<audio id="'+t+'" src="./assets/audio/'+t+'.mp3"></audio>')}),new Vue({el:"#mining-app",data:{cargo:0,sounds:t,scanner_data:"",current_ship_index:null,ships:[],ships_list:[],settings:{cargo_limit:95,task_sound:"sound-1",cargo_full_sound:"sound-1"},tasks:[],ores:{veldspar:{Veldspar:{count:0,ratio:1},"Concentrated Veldspar":{count:0,ratio:1.05},"Dense Veldspar":{count:0,ratio:1.1},"Stable Veldspar":{count:0,ratio:1.15}},scordite:{Scordite:{count:0,ratio:1},"Condensed Scordite":{count:0,ratio:1.05},"Massive Scordite":{count:0,ratio:1.1},"Glossy Scordite":{count:0,ratio:1.15}},pyroxeres:{Pyroxeres:{count:0,ratio:1},"Solid Pyroxeres":{count:0,ratio:1.05},"Viscous Pyroxeres":{count:0,ratio:1.1},"Opulent Pyroxeres":{count:0,ratio:1.15}},plagioclase:{Plagioclase:{count:0,ratio:1},"Azure Plagioclase":{count:0,ratio:1.05},"Rich Plagioclase":{count:0,ratio:1.1},"Sparkling Plagioclase":{count:0,ratio:1.15}},omber:{Omber:{count:0,ratio:1},"Silvery Omber":{count:0,ratio:1.05},"Golden Omber":{count:0,ratio:1.1},"Platinoid Omber":{count:0,ratio:1.15}},kernite:{Kernite:{count:0,ratio:1},"Luminous Kernite":{count:0,ratio:1.05},"Fiery Kernite":{count:0,ratio:1.1},"Resplendant Kernite":{count:0,ratio:1.15}},jaspet:{Jaspet:{count:0,ratio:1},"Pure Jaspet":{count:0,ratio:1.05},"Pristine Jaspet":{count:0,ratio:1.1},"Immaculate Jaspet":{count:0,ratio:1.15}},hemorphite:{Hemorphite:{count:0,ratio:1},"Vivid Hemorphite":{count:0,ratio:1.05},"Radiant Hemorphite":{count:0,ratio:1.1},"Scintillating Hemorphite":{count:0,ratio:1.15}},hedbergite:{Hedbergite:{count:0,ratio:1},"Vitric Hedbergite":{count:0,ratio:1.05},"Glazed Hedbergite":{count:0,ratio:1.1},"Lustrous Hedbergite":{count:0,ratio:1.15}},gneiss:{Gneiss:{count:0,ratio:1},"Iridescent Gneiss":{count:0,ratio:1.05},"Prismatic Gneiss":{count:0,ratio:1.1},"Brilliant Gneiss":{count:0,ratio:1.15}},"dark ochre":{"Dark Ochre":{count:0,ratio:1},"Onyx Ochre":{count:0,ratio:1.05},"Obsidian Ochre":{count:0,ratio:1.1},"Jet Ochre":{count:0,ratio:1.15}},spodumain:{Spodumain:{count:0,ratio:1},"Bright Spodumain":{count:0,ratio:1.05},"Gleaming Spodumain":{count:0,ratio:1.1},"Dazzling Spodumain":{count:0,ratio:1.15}},crokite:{Crokite:{count:0,ratio:1},"Sharp Crokite":{count:0,ratio:1.05},"Crystalline Crokite":{count:0,ratio:1.1},"Pellucid Crokite":{count:0,ratio:1.15}},bistot:{Bistot:{count:0,ratio:1},"Triclinic Bistot":{count:0,ratio:1.05},"Monoclinic Bistot":{count:0,ratio:1.1},"Cubic Bistot":{count:0,ratio:1.15}},arkonor:{Arkonor:{count:0,ratio:1},"Crimson Arkonor":{count:0,ratio:1.05},"Prime Arkonor":{count:0,ratio:1.1},"Flawless Arkonor":{count:0,ratio:1.15}},mercoxit:{Mercoxit:{count:0,ratio:1},"Magma Mercoxit":{count:0,ratio:1.05},"Vitreous Mercoxit":{count:0,ratio:1.1}}}},created:function(){this.current_ship_index=localStorage.getItem("current_ship_index");var t=localStorage.getItem("ships");null===t?this.addEmptyShip():this.ships=JSON.parse(t);var r=localStorage.getItem("settings");null!==r&&(this.settings=JSON.parse(r))},watch:{ship_count:function(t){0<t&&null===this.current_ship_index?this.current_ship_index=0:0===t&&(this.current_ship_index=null,localStorage.removeItem("current_ship_index"))},current_ship_index:function(t){void 0!==t&&localStorage.setItem("current_ship_index",t)}},computed:{validShips:function(){return this.ships.filter(function(t){return""!==t.name})},current_ship:function(){var t=this.ships[this.current_ship_index];return void 0===t?{name:"",cargo:0,yield_per_turret:0,circle_time:0,turrets:1,split_turrets:!1}:t},ship_count:function(){var e=0;return i.each(this.ships,function(t,r){""!==r.name&&e++}),e},yield_per_sec_m3:function(){var t=this.current_ship.yield_per_turret*this.current_ship.turrets/this.current_ship.circle_time;return isNaN(t)?0:t},max_cargo:function(){return this.current_ship.cargo},cargo_nearly_full:function(){return 0!==this.current_ship.cargo&&this.cargo>=this.current_ship.cargo*(this.settings.cargo_limit/100)},cargo_full:function(){return 0!==this.current_ship.cargo&&(this.cargo>=this.current_ship.cargo&&(this.$broadcast("stop-tasks"),i("#"+this.settings.cargo_full_sound)[0].play(),!0))},full_cargo_time:function(){var t=Math.round(this.current_ship.cargo/this.yield_per_sec_m3);return isNaN(t)?0:t}},methods:{saveSettings:function(){localStorage.setItem("settings",JSON.stringify(this.settings))},addEmptyShip:function(){this.ships.push({name:"",cargo:0,yield_per_turret:0,circle_time:0,turrets:1})},saveShips:function(){localStorage.setItem("ships",JSON.stringify(this.ships))},removeShip:function(t){this.ships.$remove(t),this.saveShips()},addEmptyTask:function(){this.tasks.push({label:"",ore:"veldspar",count:0})},addCargo:function(t){this.cargo+=t},addOre:function(t,r,e){var i;this.ores[t]&&e&&(this.ores[t][r]?this.ores[t][r].count+=e:(i=Object.keys(this.ores[t])[0],this.ores[t][i].count+=e))},playSound:function(t){i("#"+t)[0].play()},resetCargo:function(){this.cargo=0},removeTask:function(t){this.tasks.$remove(t)},removeEmptyTasks:function(){var e=this;i.each(this.tasks,function(t,r){0===r.count&&setTimeout(function(){e.tasks.$remove(r)},0)})},clearSummary:function(){for(var t=Object.keys(this.ores),r=0;r<t.length;r++)for(var e=Object.keys(this.ores[t[r]]),i=0;i<e.length;i++)this.ores[t[r]][e[i]].count=0},oreTypeCheck:function(t){for(var r=Object.keys(t),e=[],i=0;i<r.length;i++)for(var o=Object.keys(t[r[i]]),n=0;n<o.length;n++)0===t[r[i]][o[n]].count||e.includes(r[i])||e.push(r[i]);return e},oreVariantCheck:function(t){for(var r=Object.keys(this.ores[t]),e=[],i=0;i<r.length;i++)0===this.ores[t][r[i]].count||e.includes(r[i])||e.push(r[i]);return e},summaryType:function(t){return Object.keys(this.ores[t])[0]},summaryCount:function(t){for(var r=Object.keys(this.ores[t]),e=0,i=0;i<r.length;i++)e+=this.ores[t][r[i]].count;return e},variantCount:function(t,r){var e=this.ores[t][r].count;return t&&r&&!isNaN(e)?e:0},summaryVolume:function(t,r){var e=o.size[t];return!t||isNaN(r)||isNaN(e)?0:Math.round(r*e*100)/100},variantVolume:function(t,r){var e=this.ores[t][r].count,i=o.size[t];return!t||!r||isNaN(e)||isNaN(i)?0:Math.round(e*i*100)/100},parseScannerData:function(){var e=this;setTimeout(function(){var t,s,r=(t=e.scanner_data,s=[],i.each(t.split("\n"),function(t,r){try{var e={},i=r.split("\t");if(4!==i.length)throw console.log("length not 4"),"shorter 4";e.variant=i[0],e.label=i[0]+" - "+i[3],e.count=parseInt(i[1].replace(/\u00a0/g,"").replace(" ","").replace(".","").replace(",",""));var o=i[0].split(" "),n=1<o.length?o[1].toLowerCase():o[0].toLowerCase();switch(n){case"ochre":n="dark ochre";break;case"arisite":n="green arisite";break;case"icicle":n="clear icicle";break;case"glaze":n="white glaze";break;case"ice":n="blue ice";break;case"mass":n="glacial mass";break;case"crust":n="glare crust";break;case"glitter":n="dark glitter"}e.ore=n,s.push(e)}catch(t){}}),s);i.each(r,function(t,r){e.tasks.push({label:r.label,ore:r.ore,count:r.count,variant:r.variant})}),e.scanner_data=""},10)}}}).addEmptyTask()}i.getJSON("./assets/json/config.json",function(t){o=t,r()})}(jQuery);
//# sourceMappingURL=main.min.js.map
